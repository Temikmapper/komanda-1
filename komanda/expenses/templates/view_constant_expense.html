{% extends 'base.html' %}
{% block content %}
    <div class="block">
        <center>
            <h1 class="title">Expense</h1>
        </center>
    </div>
    <div class="box">
        <h2 class="subtitle">{{ expense.name }}</h2>
        <form method="POST" class="post-form">
            {% csrf_token %}
            <div class="block">
                {{ form.value.errors }}
                <div class="field">
                    <p class="control has-icons-left">
                        <input class="input is-primary"
                               type="number"
                               name="value"
                               placeholder="Value"
                               step="0.01"
                               required
                               id="{{ form.value.id_for_label }}">
                        <span class="icon is-small is-left">
                            <i class="fas fa-ruble-sign"></i>
                        </span>
                    </p>
                </div>
            </div>
            <div class="block">
                {{ finish_form.finish_date.errors }}
                <div class="field">
                    <p class="control has-icons-left">
                        <input class="input is-primary"
                               type="date"
                               name="finish_date"
                               placeholder="Finish date"
                               value="{{ finish_form.finish_date.value|date:"Y-m-d" }}"
                               id="{{ finish_form.finish_date.id_for_label }}">
                        <span class="icon is-small is-left">
                            <i class="fas fa-calendar"></i>
                        </span>
                    </p>
                </div>
            </div>
            <div class="block">
                <button type="submit" class="button is-success">
                    <span class="icon is-small">
                        <i class="fas fa-check"></i>
                    </span>
                    <span>Save</span>
                </button>
            </div>
        </form>
    </div>
    <div class="box">
        <div class="timeline">
            <header class="timeline-header">
                <span class="tag is-medium is-primary">Start</span>
            </header>
            {% for item in expense.get_history %}
                <div class="timeline-item">
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                        <p class="heading">
                            {{ item.date }}
                        </p>
                        <p>
                            {{ item.value }}
                        </p>
                    </div>
                </div>
            {% endfor %}
            <div class="timeline-header">
                <span class="tag is-medium is-primary">End</span>
            </div>
        </div>
    </div>
{% endblock content %}
